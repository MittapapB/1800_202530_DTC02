<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - MealWave</title>
    <!-- tailwindcss -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/profile.css" />
    <!-- fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Lobster+Two:ital,wght@0,400;0,700;1,400;1,700&family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
      rel="stylesheet"
    />
    <!-- scripts -->
    <script type="module" src="/src/js/firebaseConfig.js"></script>
    <script type="module" src="/src/js/authentication.js"></script>
    <script type="module" src="/src/js/profile.js"></script>
    <!-- back button -->
    <script type="module">
      import { BackButton } from "../components/BackButton.js";
      document.body.appendChild(BackButton({ target: "main.html" }));
    </script>
    <!-- nav bar -->
    <script type="module">
      import { Navbar } from "../components/Navbar.js";
      document.getElementById("navbar").appendChild(Navbar());
    </script>
  </head>
  <body class="bg-background-main text-nunito text-[#eb6424]">
    <div class="flex flex-col justify-center items-center pt-4 my-10 px-4">
      <!-- profile image container -->
      <div class="relative w-32 h-32 md:w-35 md:h-35">
        <img
          id="profileImage"
          class="w-full h-full rounded-full border-4 md:border-5 border-slate-50 object-cover"
          src="../../images/default-avatar.jpg"
          alt="Profile image"
        />

        <!-- Floating Camera/edit SVG -->
        <label
          for="profileImageInput"
          class="absolute bottom-1 right-1 w-8 h-8 md:w-10 md:h-10 bg-white shadow-md rounded-full flex items-center justify-center cursor-pointer hover:bg-gray-200 transition"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.8"
            stroke="currentColor"
            class="w-4 h-4 md:w-6 md:h-6 text-gray-700"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"
            />
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"
            />
          </svg>
        </label>

        <!-- Hidden Input -->
        <input
          id="profileImageInput"
          type="file"
          accept="image/*"
          class="hidden"
        />
      </div>

      <!-- Username -->
      <h1
        id="userName"
        class="text-4xl md:text-5xl font-bold my-4 text-center"
      ></h1>

      <!-- Account Settings -->
      <div
        class="flex flex-col w-full max-w-sm md:max-w-md text-left space-y-2"
      >
        <h2 class="text-xl md:text-2xl font-bold mb-4">Account Settings</h2>

        <!-- Update Profile -->
        <button id="updateProfileBtn" class="profile-btn rounded-t-lg">
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold"
                >Update Profile</span
              >
            </div>
            <svg
              class="w-4 h-4 md:w-5 md:h-5 transform rotate-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </div>
        </button>

        <!-- User Profile Form Modal -->
        <div
          id="profileFormContainer"
          class="hidden fixed inset-0 bg-black/40 items-center justify-center z-50 p-4"
        >
          <div class="bg-white p-6 rounded-lg w-full max-w-md shadow-lg">
            <h2 class="text-xl md:text-2xl font-bold mb-4">Update Profile</h2>

            <form id="profileForm" class="flex flex-col space-y-4">
              <div class="relative">
                <input
                  id="fullNameInput"
                  class="input w-full"
                  type="text"
                  placeholder="Full Name"
                />
              </div>
              <input
                id="phoneInput"
                class="input w-full"
                type="text"
                placeholder="Phone Number"
              />
              <input
                id="cityInput"
                class="input w-full"
                type="text"
                placeholder="City"
              />

              <div
                class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"
              >
                <button type="submit" class="btn-primary py-2 flex-1">
                  Save
                </button>
                <button
                  type="button"
                  id="closeFormBtn"
                  class="py-2 border rounded flex-1"
                >
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Change Password Button -->
        <button
          id="changePasswordBtn"
          class="profile-btn rounded-b-lg border-t-0"
        >
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold"
                >Change Password</span
              >
            </div>
            <svg
              class="w-4 h-4 md:w-5 md:h-5 transform rotate-0"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </div>
        </button>

        <!-- Change Password Form Modal -->
        <div
          id="changePasswordContainer"
          class="hidden flex fixed inset-0 bg-black/40 items-center justify-center z-50 p-4"
        >
          <div class="bg-white p-6 rounded-lg w-full max-w-md shadow-lg">
            <h2 class="text-xl md:text-2xl font-bold mb-4">Change Password</h2>

            <form id="changePasswordForm" class="flex flex-col space-y-4">
              <div class="relative">
                <input
                  id="currentPassword"
                  class="input w-full"
                  type="password"
                  placeholder="Current Password"
                  required
                />
              </div>
              <div class="relative">
                <input
                  id="newPassword"
                  class="input w-full"
                  type="password"
                  placeholder="New Password"
                  required
                  minlength="6"
                />
                <div class="text-xs text-gray-500 mt-1">
                  Password must be at least 6 characters long
                </div>
              </div>
              <div class="relative">
                <input
                  id="confirmPassword"
                  class="input w-full"
                  type="password"
                  placeholder="Confirm New Password"
                  required
                />
              </div>

              <div id="passwordError" class="text-red-500 text-sm hidden"></div>
              <div
                id="passwordSuccess"
                class="text-green-500 text-sm hidden"
              ></div>

              <div
                class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2"
              >
                <button type="submit" class="btn-primary py-2 flex-1">
                  Update Password
                </button>
                <button
                  type="button"
                  id="closePasswordFormBtn"
                  class="py-2 border rounded flex-1"
                >
                  Cancel
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- More Information -->
        <h2 class="text-xl md:text-2xl font-bold mt-8 mb-4">
          More From MealWave
        </h2>

        <!-- About Us Accordion -->
        <button
          onclick="toggleAccordion('about')"
          class="accordion-btn rounded-t-lg"
        >
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold">About Us</span>
            </div>
            <svg
              id="icon-about"
              class="w-4 h-4 md:w-5 md:h-5 transform transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </div>
        </button>
        <div
          id="content-about"
          class="accordion-content pb-3 text-black hidden"
        >
          <p class="text-sm md:text-base">
            We are dedicated to helping diners plan their restaurant visits more
            efficiently by sharing and browsing real-time wait times from the
            community.
          </p>
        </div>

        <!-- FAQ Accordion -->
        <button
          onclick="toggleAccordion('faq')"
          class="accordion-btn border-t-0"
        >
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold"
                >Frequently Asked Questions</span
              >
            </div>
            <svg
              id="icon-faq"
              class="w-4 h-4 md:w-5 md:h-5 transform transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </div>
        </button>
        <div id="content-faq" class="accordion-content pb-3 text-black hidden">
          <p class="text-sm md:text-base">Question: How do I log out?</p>
          <p class="text-sm md:text-base">
            Answer: At the bottom of this page.
          </p>
        </div>

        <!-- Contact Information Accordion -->
        <button
          onclick="toggleAccordion('contact')"
          class="accordion-btn border-t-0"
        >
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold"
                >Contact Information</span
              >
            </div>
            <svg
              id="icon-contact"
              class="w-4 h-4 md:w-5 md:h-5 transform transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </div>
        </button>
        <div id="content-contact" class="accordion-content text-black hidden">
          <p class="text-sm md:text-base mb-4">
            Have any question? Reach out to us.
          </p>
          <div class="flex space-x-3 my-4 sm:justify-start">
            <a href="#" class="social-icon">
              <i class="fab fa-facebook-f"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-twitter"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-icon">
              <i class="fab fa-linkedin-in"></i>
            </a>
          </div>
          <div class="mt-4">
            <ul class="space-y-3">
              <li class="flex items-start">
                <i
                  class="fas fa-map-marker-alt mr-3 mt-1 text-highlight flex-shrink-0"
                ></i>
                <span class="text-sm md:text-base"
                  >555 Seymour St Vancouver, BC V6B 3H6, Canada</span
                >
              </li>
              <li class="flex items-center">
                <i class="fas fa-phone mr-3 text-highlight flex-shrink-0"></i>
                <a
                  href="tel:+1234567890"
                  class="hover:text-highlight transition-colors text-sm md:text-base"
                  >+1 (234) 567-890</a
                >
              </li>
              <li class="flex items-center">
                <i
                  class="fas fa-envelope mr-3 text-highlight flex-shrink-0"
                ></i>
                <a
                  href="mailto:contact@example.com"
                  class="hover:text-highlight transition-colors text-sm text-blue-600 underline md:text-base"
                  >dtc02@mealwave.com</a
                >
              </li>
            </ul>
          </div>
        </div>

        <!-- Report an Issue Accordion -->
        <button
          onclick="toggleAccordion('report')"
          class="accordion-btn rounded-b-lg border-t-0"
        >
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold"
                >Report an Issue</span
              >
            </div>
            <svg
              id="icon-report"
              class="w-4 h-4 md:w-5 md:h-5 transform transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </div>
        </button>
        <div id="content-report" class="accordion-content hidden">
          <p class="text-sm md:text-base text-black">
            Found a bug or issue? Please let us know so we can improve your
            experience.
          </p>
          <p class="mt-3 font-bold text-sm md:text-base">
            Submit a report:
            <a
              href="mailto:support@mealwave.com"
              class="text-blue-600 underline"
              >support@mealwave.com</a
            >
          </p>
        </div>

        <!-- Logout Button -->
        <button id="toLogout" class="logout-btn mt-10">
          <div class="flex items-center justify-between w-full">
            <div class="flex items-center space-x-3">
              <svg
                class="w-5 h-5 md:w-6 md:h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
                />
              </svg>
              <span class="text-base md:text-lg font-semibold">Log out</span>
            </div>
          </div>
        </button>
      </div>

      <!-- copyright -->
      <div
        class="my-10 border-t border-gray-700 pt-6 text-center text-gray-400 text-sm w-full max-w-sm md:max-w-md"
      >
        <p>&copy; 2025 MealWave. All rights reserved.</p>
      </div>
    </div>
    <div id="navbar"></div>
  </body>
</html>
